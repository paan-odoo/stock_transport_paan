<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <record id="view_stock_picking_batch_graph" model="ir.ui.view">
        <field name="name">stock.picking.batch.view.graph</field>
        <field name="model">stock.picking.batch</field>
        <field name="arch" type="xml">
            <graph string="Batch Transfers">
                <field name="scheduled_date" type="row" interval="day"/>
                <field name="vehicle_category" type="column"  />
                <field name="weight"/>
                <field name="volume"/>
                <field name="transfers"/>
                <field name="lines"/>
            </graph>
        </field>
    </record>
    <record id="view_stock_picking_batch_gantt" model="ir.ui.view">
        <field name="name">stock.picking.batch.view.gantt</field>
        <field name="model">stock.picking.batch</field>
        <field name="arch" type="xml">
            <gantt js_class="stock_transport_gantt" date_start="create_date" date_stop="scheduled_date" pill_label="True" thumbnails="{'fleet_id':'image_128'}" default_group_by="dock_id,fleet_id" decoration-info="state == 'draft'" decoration-success="state == 'done'"  color="fleet_id" default_scale="week">  
                <field name="vehicle_category" />
                <field name="state" />
                <field name="weight" />
                <field name="volume" />
                <field name="driver_image"/>
            </gantt>
        </field>
    </record>
    <record id="stock_picking_batch_form_view_inherit_stock_transport" model="ir.ui.view">
        <field name="name">stock.picking.batch.form.view.inherit.stock.transport</field>
        <field name="model">stock.picking.batch</field>
        <field name="inherit_id" ref="stock_picking_batch.stock_picking_batch_form"/>
        <field name="arch" type="xml">
            <!-- <xpath expr="//field[@name='scheduled_date']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath> -->
            <xpath expr="//field[@name='scheduled_date']" position="after">
                <group class="w-100">
                    <field name="dock_id" string="Dock"/>
                    <field name="fleet_id" placeholder="Third Party Provider"/>
                    <field name="vehicle_category" placeholder="Semi-truck"/>
                </group>
                <group class="w-100" invisible="not vehicle_category">
                    <label for="weight"/>
                    <div class="o_row w-100" name="weight">
                        <field name="total_weight"/>
                        <field name="weight" widget="progressbar" class="oe_inline"/>
                    </div>
                    <label for="volume"/>
                    <div class="o_row w-100" name="volume">
                        <field name="total_volume"/>
                        <field name="volume" widget="progressbar" class="oe_inline"/>
                    </div>
                </group>
            </xpath>
        </field>
    </record>
    <record id="stock_picking_batch.stock_picking_batch_action" model="ir.actions.act_window">
        <field name="name">Batch Transfers</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.picking.batch</field>
        <field name="view_mode">tree,kanban,form,graph,gantt</field>
    </record>
</odoo>